# tree-shaking
在webpack项目中，有一个入口文件，相对于一棵树的主干，入口文件有很多依赖的模块，相当于树枝，实际情况中，虽然依赖了某个模块，但其实只使用其中的某些功能，
通过tree-shaking，将没有使用的模块摇掉，这样来达到删除无用代码的目的

## 原理
Tree-shaking的本质是消除无用的js代码，无用代码消除广泛存在于传统的编程语言编译器中，编译器可以判断出某些代码根本不影响输出，然后消除这些代码，这个称之为DCE（dead code elimination）

Tree-shaking是DCE的一种新的实现，JavaScript同传统的编程语言不同的是，JavaScript绝大多数情况需要通过网络进行加载，然后执行，加载的文件大小越小，整体执行时间更短，所以去除无用代码以减少文件体积，对JavaScript来说更有意义

Tree-shaking和传统的DCE的方法又不太一样，传统的DCE消灭不可能执行的代码，而Tree-shaking更关注于消除没有用到的代码，

### DCE消除大法
* 特征
```
1、代码不会被执行，不可到达

2、代码执行的结果不会被用到

3、代码只会影响死变量（只写不读）
```

传统编译型的语言中，都是由编译器将Dead Code从AST中删除

### Tree-shaking消除大法
Tree-shaking的消除原理是依赖于ES6的模块特性

* ES6 module特点
```
1、只能作为模块顶层的语句出现

2、import的模块名只能是字符串常量

3、import binding 是immutable的
```

ES6模块依赖关系是确定的，和运行状态无关，可以进行可靠的静态分析，这就是Tree-shaking的基础

所谓静态分析就是不执行代码，从字面量上对代码进行分析，ES6之前的模块化，比如我们可以动态require一个模块，只有执行后才知道引用的什么模块，这个就不能通过静态分析去做优化
