# 常见的Nodejs面试问题以及答案
## nodejs 与 JavaScript 有什么不同？
>JavaScript是一种编程语言，可以在任何具有合适浏览器引擎的网络浏览器中运行 <br>
除了nodejs，JavaScript用于网络应用程序的客户端，特别是用于开发动态特征 <br>
JavaScript可以在不同的浏览器引擎上运行，比如V8（谷歌）、Spider Monkey（火狐）、JavaScript Core（Safari）

>nodejs是一个为JavaScript设计的解释器和运行环境 <br>
nodejs可以在任何操作系统上用于开发与系统硬件交互的应用程序，特别是对于web后端 <br>
nodejs仅在chrome使用的V8引擎上运行

## 什么时候使用nodejs?
nodejs是异步的、事件驱动的、非阻塞的和单线程的，使得它成为开发下面应用程序的完美候选

* 实时应用程序，如聊天和提供实时更新的应用程序
* 将视频或其他多媒体内容流式传输给大量观众的流式应用程序
* 其他I/O密集型应用程序，如协作平台
* 遵循微服务架构的网络后端

nodejs的特性使得它对于其他类型的应用程序来说不是一个理想的选择，执行CPU密集型任务的应用程序在使用CPU时表现不佳，因为nodejs是单线程的

## EventEmitter做了什么？

## 事件循环是什么？
单线程的nodejs必须是非阻塞的，以防止线程阻塞在需要很长时间才能完成的任务上，事件循环负责实现这种非阻塞行为，它使用应用程序线程调度挂起的任务

nodejs在任务完成时通过回调来处理异步函数返回的响应，与创建任务的事件类似，任务完成后也会发出一个事件，nodejs将需要处理的事件添加到事件队列

事件循环对事件队列中的事件进行迭代，并安排何时执行其关联的回调函数

## 流是什么

## readFile 和 createReadStream 函数有什么区别？
readFile函数异步读取文件的全部内容，并存储在内存中，然后再传递给用户

createReadStream使用一个可读的流，逐块读取文件，而不是全部存储在内存中

与readFile相比，createReadStream使用更少的内存和更快的速度来优化文件读取操作，如果文件相当大，用户不必等待很长时间直到读取整个内容，因为读取时会先向用户发送小块内容

## 如何处理nodejs中未捕获的异常？
我们可以在进程级别捕获应用程序中未捕获的异常，为此将侦听器附加到process全局对象

process.on("uncaughtException", (err) => {
  console.log("exception caught: ", err)

})

## nodejs能否充分利于多核处理器？
nodejs应用程序总是单线程的，即使在多核处理器上运行，应用程序也能只使用一个处理器，但是nodejs的核心模块之一Cluster支持nodejs应用程序开启多核，允许我们创建多个工作进程，
这些进程可以在多个内核上并行运行，并共享一个端口来侦听事件

每个进程使用IPC与主线程通信，并根据需要将服务器句柄传递给其他进程，主进程可以侦听端口本身并以循环方式将每个新连接传递给子进程，也可以将端口分配给子进程以便子进程侦听请求

## 反应堆设计模式是什么？
反应堆设计模式是，nodejs将回调函数（处理程序）附加到每个I/O操作，然后创建请求时将处理程序提交给解复用器

解复用器收集应用程序中发出的每个I/O请求，并将它们作为队列中的事件进行排队，这个队列就是我们所说的事件队列。将事件排队后，解复用器返回应用程序线程的控制

同时，事件循环遍历事件队列中的每个事件，并调用附加的回调来处理事件响应

## 单线程与多线程网络后端相比有哪些好处？
尽管nodejs是单线程，但是大多数用于后端开发的编程语言都提供多线程来处理应用程序操作

为什么单线程有利于后端开发？

* 开发人员更容易实现应用程序，我们的应用应用程序在生产过程中不会突然遇到意外的竞争条件

* 单线程应用程序易于扩展

* 它们可以毫不延迟的在一个时刻收到的大量用户请你去提供服务，相比之下，当流量较大时，多线程后端必须等待线程池中的线程释放，才能为用户请求提供服务，
利用nodejs的非阻塞特性，用户请求不会在单个线程上挂起太长时间

## REPL是什么？
REPL代表Read Eval Print Loop，是一个虚拟环境，可以在其中轻松的运行编程语言，nodejs带有一个内置的REPL来运行JavaScript代码，类似于我们在浏览器中用来运行JavaScript代码的控制台

要启动nodejs REPL，只需要在命令行上运行node，然后写一行JavaScript代码，就可以在下一行看到它的输出

## process.nextTick 和 setImmediate有什么区别？
传递给setImmediate函数的回调将在事件队列上的下一次迭代中执行

另一方面，回调传递给process.nextTick在下一次迭代之前以及程序中当前运行的操作完成之后执行，在应用程序启用时，开始遍历事件队列之前调用它的回调

因此，回调process.nextTick 总是在 setImmediate之前调用

## 什么是yarn 和 npm ？为什么要用 yarn 代替 npm ?
npm是与nodejs自带的默认包管理器，它有一个大型的公共库和私有库，存储在npm registry的数据库中，用户可以通过npm命令行访问该数据库，在npm的帮助下，用户可以轻松管理项目中依赖项

yarn也是一个包管理器，为了解决npm的一些缺点，yarn依赖npm注册中心为用户提供的对包访问，yarn底层结构基于npm，如果从npm迁移到yarn，项目结构和工作流不需要大改

就像之前说的，在某些情况下，yarn提供了比npm更好的功能，与npm不同的是，它会缓存下载的每个包，不必重新下载

通过校验和验证包的完整性来提供更好的安全性，保证在某个系统上运行的包在任何其他系统中的工作方式完全相同

## 参考文档
* [15 个常见的 Node.js 面试问题及答案](https://mp.weixin.qq.com/s/Zn9BEgoyAwq9bfpoBMUYPA)

