# 深浅拷贝
###JS数据类型
* js 五种基本数据类型 undefined null number string boolean -> 存放在栈内存中
* js 引用数据类型 object（array、function）  -> 存放在堆内存中
------------------------------------------------------------------
* js中的浅拷贝与深拷贝，只是针对复杂数据类型（object、array）的复制问题
* 浅拷贝与深拷贝 都可以实现在已有对象上再生出一份的作用，但对象的实例是存储在堆内存中然后通过一个引用值去操作对象
* 故 拷贝的时候就存在两种情况：拷贝引用、拷贝实例
------------------------------------------------------------------
###堆和栈的区别
* 堆和栈都是内存中划分出来用来存储的区域

* 栈用于存放一些基本类型的变量和对象的引用变量，栈为自动分配的内存空间，它由系统自动释放
* 堆用于存放由new创建的对象，堆是动态分配的内存，大小不定也不会自动释放
------------------------------------------------------------------
###传值与传址
* 基本数据类型的赋值是传值，即(=)是在内存中新开辟一段栈内存，然后再把将值赋值到新的栈中 即复制的是数值
* 引用数据类型的赋值是传址，只是改变指针的指向，也就是说引用类型的赋值是对象保存在栈中的地址的赋值，这样两个变量指向同一个对象内存地址，即复制的是地址 

###浅拷贝和深拷贝的区别
* 浅拷贝：只复制指向某个对象的指针，而不复制对象本身，新旧对象共享一块内存地址
* 深拷贝：复制并创建一个一模一样的对象，不共享内存地址，修改新对象，旧对象保持不变
* 即 主要区别就是其在内存中的存储类型不同
------------------------------------------------------------------
###一、浅拷贝的实现
```$xslt
1、对象的浅拷贝
var obj = {
    name:'哈哈哈',
    age: 22
}
var obj2 = obj;
```
```$xslt
2、数组的浅拷贝
var arr = [1, 2, 3, 4];
var arr2 = arr;
```
###二、深拷贝的实现
```$xslt
1、数组的深拷贝
* 使用 slice() 
  语法: stringObject.slice(start, end) 
  返回值: 一个新的字符串，包括字符串stringObject从start开始(包括start) 到 end结束(不包括end)为止的所有字符
  start: 截取片段的起始位置，如果是负数，则从字符串的尾部开始算起 即 -1 指最后一个位置 
  end: 截取片段的结束位置，若未指定，则要提取的字符串到结尾，如果是负数，则从字符串末尾开始位置算起 即 -1 指最后一个位置
  
  let arr = [1,2,3,4,5,6]
  let arrCopy = arr.slice(2, -2)   -> [3,4]
  let arrCopy2 = arr.slice(-3, -2) -> [4]
 
* 使用concat()
  1、String.prototype.concat()
  concat()方法将一个或多个字符串与原字符串连接合并，形成一个新的字符串并返回
  
  let hello = "Hello,";
  hello.concat("Kevin", " have a nice day.")   -> Hello, Kevin have a nice day.
  
  2、Array.prototype.concat()
  concat()方法用于合并两个或多个数组，此方法不会更改现有数组，而是返回一个新的数组
  
  let arr1 = [1,2]
  let arr2 = [3,4]
  let arr3 = arr1.concat(arr2)  -> [1,2,3,4] // 不会去重的
  
slice() 和 concat() 仅适用于对不包含引用对象的一堆数组的深拷贝
  
* 使用ES6扩展运算符

  let arr = [1,2,3]
  let arr2 = [...arr]  -> [1,2,3]
```
```$xslt
2、对象的深拷贝
* 利用递归来实现每一层都重新创建对象并赋值
  
  for...in法

* 使用 JSON.parse(JSON.stringify())进行深拷贝

  let newObj = JSON.parse(JSON.stringify(obj))
 
* ES6中Object.assign() 
  
  用于合并对象，将源对象的所有可枚举属性，复制到目标对象上 -> 生成的是新对象
  
  let data = {
    a: "123",
    b: 123,
    c: true,
    d: [43, 2],
    e: undefined,
  };
  let newData = Object.assign({},data) 

```
