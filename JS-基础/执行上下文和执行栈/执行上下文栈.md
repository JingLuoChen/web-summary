# JavaScript深入之执行上下文栈
## 概述
如果要问到JavaScript代码执行顺序的话，想必写过JavaScript的开发者都会有个直观的印象，那就是顺序执行

```js
var foo = function () {
    console.log('foo1');
}

foo();  // foo1

var foo = function () {
    console.log('foo2');
}

foo(); // foo2
```

然而看这段代码：

```js
function foo() {
    console.log('foo1');
}

foo();  // foo2

function foo() {
    console.log('foo2');
}

foo(); // foo2
```

打印的结果却是两个foo2.

这是因为JavaScript引擎并非一行一行地分析和执行程序，而是一段一段地分析执行。当执行一段代码的时候，会进行一个"准备工作"，比如第一个例子中的变量提升和第二个例子中的函数提升。

## 问题
* 这个一段一段中的段是怎么划分的？
* 到底JavaScript引擎遇到一段怎样的代码时才会做"准备工作"呢？


