# XSS攻击
## 概述
Cross-Site Scripting - 跨站脚本攻击
是一种代码注入攻击，攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行，
利用这些恶意脚本，攻击者可获取用户的敏感信息如Cookie、SessionID等，进而危害数据安全

* 为了和 CSS 区分，这里把攻击的第一个字母改成了 X，于是叫做 XSS

## 本质
XSS的本质是恶意代码未经过，与网站正常的代码混合在一起，浏览器无法分辨哪些脚本是可信的，导致恶意脚本被执行

## 分类
### 存储型XSS
* 攻击步骤
1、攻击者将恶意代码提交到目标网站的数据库中<br>
2、用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在HTML中返回给浏览器<br>
3、用户浏览器接受到响应后解析执行，混在其中的恶意代码也被执行<br>
4、恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作

* 这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等等

### 反射型XSS
* 攻击步骤
1、攻击者构造出特殊的URL，其中包含恶意代码<br>
2、用户打开带有恶意代码的URL时，网站服务端将恶意代码从URL中取出，拼接在HTML中返回给浏览器<br>
3、用户浏览器接受到响应后解析执行，混在其中的恶意代码也被执行<br>
4、恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作

* 反射型XSS跟存储型XSS的区别
存储型XSS的恶意代码存在数据库中，反射型XSS的恶意代码存在URL中

* 这种攻击常见于通过URL传递参数的功能，如网站搜索、跳转等等

### DOM型XSS
* 攻击步骤
1、攻击者构造出特殊的URL，其中包括恶意代码<br>
2、用户打开带有恶意代码的URL<br>
3、用户浏览器接受到响应后解析执行，前端JavaScript取出URL中的恶意代码并执行<br>
4、恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击这指定的操作

* DOM型XSS跟前两种XSS的区别
DOM型XSS攻击中，取出和执行恶意代码由浏览器端完成，属于前端JavaScript自身的安全漏洞，而其他两种XSS都属于服务端的安全漏洞

## XSS攻击的预防
XSS攻击有两大要素：攻击者提交恶意代码、浏览器执行恶意代码

## 参考文档
* [前端安全系列（一）：如何防止XSS攻击？](https://tech.meituan.com/2018/09/27/fe-security.html)
